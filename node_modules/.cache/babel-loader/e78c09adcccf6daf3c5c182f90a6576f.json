{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\ecommerce\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\ecommerce\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _createForOfIteratorHelper from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\ecommerce\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\ecommerce\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\ecommerce\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\ecommerce\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\ecommerce\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\ecommerce\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\ecommerce\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import swal from'sweetalert';import Button from\"../../../../Components/Button/Button\";import Input from\"../../../../Components/Input/Input\";import\"./NewPassword.css\";import{length,required}from\"../../../../util/validators\";import Footer from'../../../../Components/MainComponents/Footer/Footer';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={ResetForm:{password:{value:\"\",valid:false,touched:false,validators:[required,length({min:5})]},formIsValid:false}};_this.setNewPasswordHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event,authData){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();fetch(process.env.BACKEND_URL+'/auth/new-password',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({password:authData.password,token:_this.props.match.params.token})}).then(function(res){return res.json();}).then(function(result){console.log(result);swal({title:\"Change password successfully!\",text:\"Hello my friend! Just sign in and enjoy\",icon:\"success\",buttons:{text:'OK'}});_this.props.history.push('/login');}).catch(function(err){return console.log(err);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.inputChangeHandler=function(input,value){_this.setState(function(prevState){var isValid=true;var _iterator=_createForOfIteratorHelper(prevState.ResetForm[input].validators),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var validator=_step.value;isValid=isValid&&validator(value);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var updatedForm=_objectSpread(_objectSpread({},prevState.ResetForm),{},_defineProperty({},input,_objectSpread(_objectSpread({},prevState.ResetForm[input]),{},{valid:isValid,value:value})));var formIsValid=true;for(var inputName in updatedForm){formIsValid=formIsValid&&updatedForm[inputName].valid;}return{ResetForm:updatedForm,formIsValid:formIsValid};});};_this.inputBlurHandler=function(input){_this.setState(function(prevState){return{ResetForm:_objectSpread(_objectSpread({},prevState.ResetForm),{},_defineProperty({},input,_objectSpread(_objectSpread({},prevState.ResetForm[input]),{},{touched:true})))};});};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;localStorage.removeItem(\"page\");return/*#__PURE__*/React.createElement(\"div\",{className:\"loginSection\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-6\",style:{display:'block',margin:'auto'}},/*#__PURE__*/React.createElement(\"div\",{className:\"login-form\"},/*#__PURE__*/React.createElement(\"a\",{\"aria-current\":\"page\",className:\"navbar-brand login\",href:\"/\"},\"Winkel\"),/*#__PURE__*/React.createElement(\"h2\",{className:\"loginTitle\"},\"Login\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){return _this2.setNewPasswordHandler(e,{password:_this2.state.ResetForm.password.value});}},/*#__PURE__*/React.createElement(Input,{id:\"password\",textLabel:\"Password\",type:\"password\",onChange:this.inputChangeHandler,onBlur:this.inputBlurHandler.bind(this,\"password\"),value:this.state.ResetForm[\"password\"].value,valid:this.state.ResetForm[\"password\"].valid,touched:this.state.ResetForm[\"password\"].touched}),/*#__PURE__*/React.createElement(Button,{auth:\"SET NEW PASSWORD\"})))))),/*#__PURE__*/React.createElement(Footer,null));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/ecommerce/front-end/src/Containers/Auth/ForgetPassword/NewPassword/NewPassword.js"],"names":["React","Component","swal","Button","Input","length","required","Footer","Login","state","ResetForm","password","value","valid","touched","validators","min","formIsValid","setNewPasswordHandler","event","authData","preventDefault","fetch","process","env","BACKEND_URL","method","headers","body","JSON","stringify","token","props","match","params","then","res","json","result","console","log","title","text","icon","buttons","history","push","catch","err","inputChangeHandler","input","setState","prevState","isValid","validator","updatedForm","inputName","inputBlurHandler","localStorage","removeItem","display","margin","e","bind"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport swal from 'sweetalert';\r\nimport Button from \"../../../../Components/Button/Button\";\r\nimport Input from \"../../../../Components/Input/Input\";\r\nimport \"./NewPassword.css\";\r\nimport { length,required } from \"../../../../util/validators\";\r\nimport Footer from '../../../../Components/MainComponents/Footer/Footer'\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    ResetForm: {\r\n        password: {\r\n            value: \"\",\r\n            valid: false,\r\n            touched: false,\r\n            validators: [required, length({ min: 5 })],\r\n          },\r\n      formIsValid: false,\r\n    },\r\n  };\r\n\r\n  setNewPasswordHandler=async(event,authData)=>{\r\n    event.preventDefault();\r\n    fetch(process.env.BACKEND_URL+'/auth/new-password',{\r\n      method:'POST',\r\n      headers:{\r\n        'Content-Type':'application/json'\r\n            },\r\n      body:JSON.stringify({password:authData.password,token:this.props.match.params.token}),\r\n    })\r\n    .then(res=>res.json())\r\n      .then(result=>{\r\n          console.log(result)\r\n        swal({\r\n          title: \"Change password successfully!\",\r\n          text: \"Hello my friend! Just sign in and enjoy\",\r\n          icon: \"success\",\r\n          buttons:{\r\n            text:'OK'\r\n          }\r\n        })\r\n        this.props.history.push('/login')\r\n      })\r\n    .catch(err=>console.log(err))\r\n  }\r\n  inputChangeHandler = (input, value) => {\r\n    this.setState((prevState) => {\r\n      let isValid = true;\r\n      for (const validator of prevState.ResetForm[input].validators) {\r\n        isValid = isValid && validator(value);\r\n      }\r\n      const updatedForm = {\r\n        ...prevState.ResetForm,\r\n        [input]: {\r\n          ...prevState.ResetForm[input],\r\n          valid: isValid,\r\n          value: value,\r\n        },\r\n      };\r\n      let formIsValid = true;\r\n      for (const inputName in updatedForm) {\r\n        formIsValid = formIsValid && updatedForm[inputName].valid;\r\n      }\r\n      return {\r\n        ResetForm: updatedForm,\r\n        formIsValid: formIsValid,\r\n      };\r\n    });\r\n  };\r\n\r\n  inputBlurHandler = (input) => {\r\n    this.setState((prevState) => {\r\n      return {\r\n        ResetForm: {\r\n          ...prevState.ResetForm,\r\n          [input]: {\r\n            ...prevState.ResetForm[input],\r\n            touched: true,\r\n          },\r\n        },\r\n      };\r\n    });\r\n  };\r\n  render() {\r\n    localStorage.removeItem(\"page\");\r\n    return (\r\n      <div className=\"loginSection\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-lg-6\" style={{display:'block',margin:'auto'}}>\r\n              <div className=\"login-form\">\r\n              <a aria-current=\"page\" className=\"navbar-brand login\" href=\"/\">Winkel</a>\r\n                <h2 className=\"loginTitle\">Login</h2>\r\n                <form  onSubmit={(e) =>this.setNewPasswordHandler(e, {\r\n                      password: this.state.ResetForm.password.value})}>\r\n                 <Input\r\n                    id=\"password\"\r\n                    textLabel=\"Password\"\r\n                    type=\"password\"\r\n                    onChange={this.inputChangeHandler}\r\n                    onBlur={this.inputBlurHandler.bind(this, \"password\")}\r\n                    value={this.state.ResetForm[\"password\"].value}\r\n                    valid={this.state.ResetForm[\"password\"].valid}\r\n                    touched={this.state.ResetForm[\"password\"].touched}\r\n                  ></Input>\r\n                  <Button auth=\"SET NEW PASSWORD\"></Button>        \r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Footer/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}