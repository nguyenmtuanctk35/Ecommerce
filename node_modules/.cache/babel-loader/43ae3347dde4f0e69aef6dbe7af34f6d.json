{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\REACT\\\\TestHook\\\\testhook\\\\front-end\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport { Route, Switch, Redirect, withRouter } from 'react-router-dom';\nimport axios from 'axios';\nimport Login from './Containers/Auth/Login/Login';\nimport Signup from './Containers/Auth/Signup/Signup';\nimport Logout from './Containers/Auth/Logout/Logout';\nimport ResetPassword from './Containers/Auth/ForgetPassword/ResetPassword/ResetPassword';\nimport SetNewPassword from './Containers/Auth/ForgetPassword/NewPassword/NewPassword';\nimport Index from './Containers/Index/Index';\nimport Shop from './Containers/Shop/Index';\nimport DetailProduct from './Containers/DetailProduct/Index';\nimport Cart from './Containers/Checkout/ShoppingCart/Index';\nimport Shipping from './Containers/Checkout/Shipping/Index';\nimport Payment from './Containers/Checkout/Payment/Index';\nimport CompleteOrder from './Containers/Checkout/Index';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isAuth: false,\n      token: null,\n      userId: null,\n      error: null,\n      fetchedProducts: []\n    };\n\n    this.setAutoLogout = milliseconds => {\n      setTimeout(() => {\n        this.logoutHandler();\n      }, milliseconds);\n    };\n\n    this.logoutHandler = () => {\n      this.setState({\n        isAuth: false,\n        token: null\n      });\n      localStorage.removeItem('token');\n      localStorage.removeItem('expiryDate');\n      localStorage.removeItem('userId');\n      localStorage.removeItem('name');\n      window.location.reload(false);\n    };\n\n    this.signupHandler = (event, authData) => {\n      event.preventDefault();\n      this.setState({\n        authLoading: true\n      });\n      fetch('http://localhost:8080/auth/signup', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: authData.signupForm.email.value,\n          password: authData.signupForm.password.value,\n          name: authData.signupForm.name.value\n        })\n      }).then(res => {\n        if (res.status === 422) {\n          throw new Error(\"Validation failed. Make sure the email address isn't used yet!\");\n        }\n\n        if (res.status !== 200 && res.status !== 201) {\n          console.log('Error!');\n          throw new Error('Creating a user failed!');\n        }\n\n        return res.json();\n      }).then(resData => {\n        this.props.history.push('/login');\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.loginHandler = (event, authData) => {\n      event.preventDefault();\n      fetch('http://localhost:8080/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: authData.email,\n          password: authData.password\n        })\n      }).then(res => {\n        if (res.status === 422) {\n          throw new Error('Validation failed');\n        }\n\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Could not authenticate you!');\n        }\n\n        return res.json();\n      }).then(resData => {\n        this.setState({\n          isAuth: true,\n          token: resData.token,\n          userId: resData.userId\n        });\n        localStorage.setItem('token', resData.token);\n        localStorage.setItem('userId', resData.userId);\n        const remainingMilliseconds = 60 * 60 * 1000;\n        const expiryDate = new Date(new Date().getTime() + remainingMilliseconds);\n        localStorage.setItem('expiryDate', expiryDate.toISOString());\n        this.setAutoLogout(remainingMilliseconds);\n      }).then(result => {\n        this.props.history.push('/');\n      }).catch(err => {\n        console.log(err);\n        this.setState({\n          isAuth: false,\n          error: err\n        });\n      });\n    };\n\n    this.responseSuccessGoogle = response => {\n      axios({\n        method: \"POST\",\n        url: 'http://localhost:8080/auth/googleLogin',\n        data: {\n          tokenId: response.tokenId\n        }\n      }).then(res => {\n        if (res.status === 422) {\n          throw new Error('Validation failed');\n        }\n\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Could not authenticate you!');\n        }\n\n        return res.data;\n      }).then(resData => {\n        this.setState({\n          isAuth: true,\n          token: resData.token,\n          userId: resData.userId\n        });\n        localStorage.setItem('token', resData.token);\n        localStorage.setItem('userId', resData.userId);\n        const remainingMilliseconds = 60 * 60 * 1000;\n        const expiryDate = new Date(new Date().getTime() + remainingMilliseconds);\n        localStorage.setItem('expiryDate', expiryDate.toISOString());\n        this.setAutoLogout(remainingMilliseconds);\n      }).then(result => {\n        this.props.history.push('/');\n      }).catch(err => {\n        console.log(err);\n        this.setState({\n          isAuth: false,\n          error: err\n        });\n      });\n    };\n\n    this.responseErrorGoogle = response => {};\n\n    this.responseFacebook = response => {\n      axios({\n        method: \"POST\",\n        url: 'http://localhost:8080/auth/facebookLogin',\n        data: {\n          accessToken: response.accessToken,\n          userID: response.userID,\n          name: response.name\n        }\n      }).then(response => {\n        if (response.status === 422) {\n          throw new Error('Validation failed');\n        }\n\n        if (response.status !== 200 && response.status !== 201) {\n          throw new Error('Could not authenticate you!');\n        }\n\n        return response;\n      }).then(resData => {\n        console.log(resData);\n        this.setState({\n          isAuth: true,\n          token: resData.accessToken,\n          userId: resData.userID\n        });\n        localStorage.setItem('token', resData.token);\n        localStorage.setItem('userId', resData.userId);\n        const remainingMilliseconds = 60 * 60 * 1000;\n        const expiryDate = new Date(new Date().getTime() + remainingMilliseconds);\n        localStorage.setItem('expiryDate', expiryDate.toISOString());\n        this.setAutoLogout(remainingMilliseconds);\n      }).then(result => {\n        this.props.history.push('/');\n      }).catch(err => {\n        console.log(err);\n        this.setState({\n          isAuth: false,\n          error: err\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem('token');\n    const expiryDate = localStorage.getItem('expiryDate');\n\n    if (!token || !expiryDate) {\n      return;\n    }\n\n    if (new Date(expiryDate) <= new Date()) {\n      this.logoutHandler();\n      return;\n    }\n\n    const userId = localStorage.getItem('userId');\n    const remainingMilliseconds = new Date(expiryDate).getTime() - new Date().getTime();\n    this.setState({\n      isAuth: true,\n      token: token,\n      userId: userId\n    });\n    this.setAutoLogout(remainingMilliseconds);\n  }\n\n  render() {\n    let routes = /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"/reset\",\n      exact: true,\n      render: props => /*#__PURE__*/React.createElement(ResetPassword, Object.assign({}, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 2\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/reset/:token\",\n      exact: true,\n      render: props => /*#__PURE__*/React.createElement(SetNewPassword, Object.assign({}, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 59\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/login\",\n      exact: true,\n      render: props => /*#__PURE__*/React.createElement(Login, Object.assign({}, props, {\n        onLogin: this.loginHandler,\n        responseSuccessGoogle: this.responseSuccessGoogle,\n        responseErrorGoogle: this.responseErrorGoogle,\n        responseFacebook: this.responseFacebook,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/signup\",\n      exact: true,\n      render: props => /*#__PURE__*/React.createElement(Signup, Object.assign({}, props, {\n        userId: this.state.userId,\n        token: this.state.token,\n        isAuth: this.state.isAuth,\n        onSignup: this.signupHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/shop\",\n      exact: true,\n      render: props => /*#__PURE__*/React.createElement(Shop, Object.assign({}, props, {\n        userId: this.state.userId,\n        token: this.state.token,\n        isAuth: this.state.isAuth,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 9\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/cart\",\n      exact: true,\n      render: props => /*#__PURE__*/React.createElement(Cart, Object.assign({}, props, {\n        userId: this.state.userId,\n        token: this.state.token,\n        isAuth: this.state.isAuth,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 24\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      exact: true,\n      render: props => /*#__PURE__*/React.createElement(Index, {\n        userId: this.state.userId,\n        token: this.state.token,\n        isAuth: this.state.isAuth,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 15\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/:productId\",\n      exact: true,\n      render: props => /*#__PURE__*/React.createElement(DetailProduct, Object.assign({}, props, {\n        userId: this.state.userId,\n        token: this.state.token,\n        isAuth: this.state.isAuth,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 26\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 7\n      }\n    }));\n\n    if (this.state.isAuth) {\n      routes = /*#__PURE__*/React.createElement(Switch, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        path: \"/logout\",\n        exact: true,\n        render: props => /*#__PURE__*/React.createElement(Logout, Object.assign({}, props, {\n          onLogout: this.logoutHandler,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 29\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/shop\",\n        exact: true,\n        render: props => /*#__PURE__*/React.createElement(Shop, Object.assign({}, props, {\n          userId: this.state.userId,\n          token: this.state.token,\n          isAuth: this.state.isAuth,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 9\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 8\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/cart\",\n        exact: true,\n        render: props => /*#__PURE__*/React.createElement(Cart, Object.assign({}, props, {\n          userId: this.state.userId,\n          token: this.state.token,\n          isAuth: this.state.isAuth,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 50\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/shipping\",\n        exact: true,\n        render: props => /*#__PURE__*/React.createElement(Shipping, Object.assign({}, props, {\n          userId: this.state.userId,\n          token: this.state.token,\n          isAuth: this.state.isAuth,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 52\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 6\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/payment\",\n        exact: true,\n        render: props => /*#__PURE__*/React.createElement(Payment, Object.assign({}, props, {\n          userId: this.state.userId,\n          token: this.state.token,\n          isAuth: this.state.isAuth,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 29\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 6\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/completeOrder\",\n        exact: true,\n        render: props => /*#__PURE__*/React.createElement(CompleteOrder, Object.assign({}, props, {\n          userId: this.state.userId,\n          token: this.state.token,\n          isAuth: this.state.isAuth,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 56\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 5\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/:productId\",\n        exact: true,\n        render: props => /*#__PURE__*/React.createElement(DetailProduct, Object.assign({}, props, {\n          userId: this.state.userId,\n          token: this.state.token,\n          isAuth: this.state.isAuth,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 54\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 6\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/\",\n        exact: true,\n        render: props => /*#__PURE__*/React.createElement(Index, {\n          userId: this.state.userId,\n          token: this.state.token,\n          isAuth: this.state.isAuth,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 15\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 7\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 7\n      }\n    }, routes);\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/REACT/TestHook/testhook/front-end/src/App.js"],"names":["React","Component","Route","Switch","Redirect","withRouter","axios","Login","Signup","Logout","ResetPassword","SetNewPassword","Index","Shop","DetailProduct","Cart","Shipping","Payment","CompleteOrder","App","state","isAuth","token","userId","error","fetchedProducts","setAutoLogout","milliseconds","setTimeout","logoutHandler","setState","localStorage","removeItem","window","location","reload","signupHandler","event","authData","preventDefault","authLoading","fetch","method","headers","body","JSON","stringify","email","signupForm","value","password","name","then","res","status","Error","console","log","json","resData","props","history","push","catch","err","loginHandler","setItem","remainingMilliseconds","expiryDate","Date","getTime","toISOString","result","responseSuccessGoogle","response","url","data","tokenId","responseErrorGoogle","responseFacebook","accessToken","userID","componentDidMount","getItem","render","routes"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,KAAT,EAAeC,MAAf,EAAsBC,QAAtB,EAA+BC,UAA/B,QAAgD,kBAAhD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,KAAP,MAAkB,+BAAlB;AACA,OAAOC,MAAP,MAAmB,iCAAnB;AACA,OAAOC,MAAP,MAAmB,iCAAnB;AACA,OAAOC,aAAP,MAA0B,8DAA1B;AACA,OAAOC,cAAP,MAA2B,0DAA3B;AACA,OAAOC,KAAP,MAAkB,0BAAlB;AACA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,OAAOC,aAAP,MAA0B,kCAA1B;AAEA,OAAOC,IAAP,MAAiB,0CAAjB;AACA,OAAOC,QAAP,MAAqB,sCAArB;AACA,OAAOC,OAAP,MAAoB,qCAApB;AACA,OAAOC,aAAP,MAA0B,6BAA1B;;AACA,MAAMC,GAAN,SAAkBlB,SAAlB,CAA4B;AAAA;AAAA;AAAA,SAC1BmB,KAD0B,GAClB;AACNC,MAAAA,MAAM,EAAE,KADF;AAENC,MAAAA,KAAK,EAAE,IAFD;AAGNC,MAAAA,MAAM,EAAE,IAHF;AAINC,MAAAA,KAAK,EAAE,IAJD;AAKNC,MAAAA,eAAe,EAAC;AALV,KADkB;;AAAA,SAQ1BC,aAR0B,GAQVC,YAAY,IAAI;AAC9BC,MAAAA,UAAU,CAAC,MAAM;AACf,aAAKC,aAAL;AACD,OAFS,EAEPF,YAFO,CAAV;AAGD,KAZyB;;AAAA,SA+B1BE,aA/B0B,GA+BV,MAAM;AACpB,WAAKC,QAAL,CAAc;AAAET,QAAAA,MAAM,EAAE,KAAV;AAAiBC,QAAAA,KAAK,EAAE;AAAxB,OAAd;AACAS,MAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAD,MAAAA,YAAY,CAACC,UAAb,CAAwB,YAAxB;AACAD,MAAAA,YAAY,CAACC,UAAb,CAAwB,QAAxB;AACAD,MAAAA,YAAY,CAACC,UAAb,CAAwB,MAAxB;AACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB;AACD,KAtCyB;;AAAA,SAwC1BC,aAxC0B,GAwCV,CAACC,KAAD,EAAQC,QAAR,KAAqB;AACnCD,MAAAA,KAAK,CAACE,cAAN;AACA,WAAKT,QAAL,CAAc;AAAEU,QAAAA,WAAW,EAAE;AAAf,OAAd;AACAC,MAAAA,KAAK,CAAC,mCAAD,EAAsC;AACzCC,QAAAA,MAAM,EAAE,KADiC;AAEzCC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAFgC;AAKzCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,UAAAA,KAAK,EAAET,QAAQ,CAACU,UAAT,CAAoBD,KAApB,CAA0BE,KADd;AAEnBC,UAAAA,QAAQ,EAAEZ,QAAQ,CAACU,UAAT,CAAoBE,QAApB,CAA6BD,KAFpB;AAGnBE,UAAAA,IAAI,EAAEb,QAAQ,CAACU,UAAT,CAAoBG,IAApB,CAAyBF;AAHZ,SAAf;AALmC,OAAtC,CAAL,CAWGG,IAXH,CAWQC,GAAG,IAAI;AACX,YAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtB,gBAAM,IAAIC,KAAJ,CACJ,gEADI,CAAN;AAGD;;AACD,YAAIF,GAAG,CAACC,MAAJ,KAAe,GAAf,IAAsBD,GAAG,CAACC,MAAJ,KAAe,GAAzC,EAA8C;AAC5CE,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,gBAAM,IAAIF,KAAJ,CAAU,yBAAV,CAAN;AACD;;AACD,eAAOF,GAAG,CAACK,IAAJ,EAAP;AACD,OAtBH,EAuBGN,IAvBH,CAuBQO,OAAO,IAAI;AACf,aAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACD,OAzBH,EA0BGC,KA1BH,CA0BSC,GAAG,IAAI;AACZR,QAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ;AACD,OA5BH;AA6BD,KAxEyB;;AAAA,SAyE1BC,YAzE0B,GAyEb,CAAC5B,KAAD,EAAOC,QAAP,KAAkB;AAC7BD,MAAAA,KAAK,CAACE,cAAN;AACAE,MAAAA,KAAK,CAAC,kCAAD,EAAoC;AACvCC,QAAAA,MAAM,EAAC,MADgC;AAEvCC,QAAAA,OAAO,EAAC;AACN,0BAAe;AADT,SAF+B;AAKvCC,QAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAe;AAClBC,UAAAA,KAAK,EAACT,QAAQ,CAACS,KADG;AAElBG,UAAAA,QAAQ,EAACZ,QAAQ,CAACY;AAFA,SAAf;AALkC,OAApC,CAAL,CAUCE,IAVD,CAUMC,GAAG,IAAE;AACT,YAAGA,GAAG,CAACC,MAAJ,KAAa,GAAhB,EAAoB;AAClB,gBAAM,IAAIC,KAAJ,CAAU,mBAAV,CAAN;AACD;;AACD,YAAGF,GAAG,CAACC,MAAJ,KAAe,GAAf,IAAsBD,GAAG,CAACC,MAAJ,KAAc,GAAvC,EAA2C;AACzC,gBAAM,IAAIC,KAAJ,CAAU,6BAAV,CAAN;AACD;;AACD,eAAOF,GAAG,CAACK,IAAJ,EAAP;AACD,OAlBD,EAmBCN,IAnBD,CAmBMO,OAAO,IAAE;AACb,aAAK7B,QAAL,CAAc;AACZT,UAAAA,MAAM,EAAE,IADI;AAEZC,UAAAA,KAAK,EAAEqC,OAAO,CAACrC,KAFH;AAGZC,UAAAA,MAAM,EAAEoC,OAAO,CAACpC;AAHJ,SAAd;AAKAQ,QAAAA,YAAY,CAACmC,OAAb,CAAqB,OAArB,EAA6BP,OAAO,CAACrC,KAArC;AACAS,QAAAA,YAAY,CAACmC,OAAb,CAAqB,QAArB,EAA8BP,OAAO,CAACpC,MAAtC;AACA,cAAM4C,qBAAqB,GAAC,KAAG,EAAH,GAAM,IAAlC;AACA,cAAMC,UAAU,GAAC,IAAIC,IAAJ,CACf,IAAIA,IAAJ,GAAWC,OAAX,KAAuBH,qBADR,CAAjB;AAGApC,QAAAA,YAAY,CAACmC,OAAb,CAAqB,YAArB,EAAkCE,UAAU,CAACG,WAAX,EAAlC;AACA,aAAK7C,aAAL,CAAmByC,qBAAnB;AACD,OAjCD,EAkCCf,IAlCD,CAkCMoB,MAAM,IAAE;AACZ,aAAKZ,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD,OApCD,EAqCCC,KArCD,CAqCOC,GAAG,IAAE;AACVR,QAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ;AACA,aAAKlC,QAAL,CAAc;AACZT,UAAAA,MAAM,EAAE,KADI;AAEZG,UAAAA,KAAK,EAAEwC;AAFK,SAAd;AAID,OA3CD;AA4CD,KAvHyB;;AAAA,SAyH1BS,qBAzH0B,GAyHHC,QAAD,IAAY;AAChCpE,MAAAA,KAAK,CAAC;AACJoC,QAAAA,MAAM,EAAC,MADH;AAEJiC,QAAAA,GAAG,EAAC,wCAFA;AAGJC,QAAAA,IAAI,EAAC;AAACC,UAAAA,OAAO,EAACH,QAAQ,CAACG;AAAlB;AAHD,OAAD,CAAL,CAKCzB,IALD,CAKMC,GAAG,IAAE;AACT,YAAGA,GAAG,CAACC,MAAJ,KAAa,GAAhB,EAAoB;AAClB,gBAAM,IAAIC,KAAJ,CAAU,mBAAV,CAAN;AACD;;AACD,YAAGF,GAAG,CAACC,MAAJ,KAAe,GAAf,IAAsBD,GAAG,CAACC,MAAJ,KAAc,GAAvC,EAA2C;AACzC,gBAAM,IAAIC,KAAJ,CAAU,6BAAV,CAAN;AACD;;AAED,eAAOF,GAAG,CAACuB,IAAX;AACD,OAdD,EAeCxB,IAfD,CAeMO,OAAO,IAAE;AACb,aAAK7B,QAAL,CAAc;AACZT,UAAAA,MAAM,EAAE,IADI;AAEZC,UAAAA,KAAK,EAAEqC,OAAO,CAACrC,KAFH;AAGZC,UAAAA,MAAM,EAAEoC,OAAO,CAACpC;AAHJ,SAAd;AAKAQ,QAAAA,YAAY,CAACmC,OAAb,CAAqB,OAArB,EAA6BP,OAAO,CAACrC,KAArC;AACAS,QAAAA,YAAY,CAACmC,OAAb,CAAqB,QAArB,EAA8BP,OAAO,CAACpC,MAAtC;AACA,cAAM4C,qBAAqB,GAAC,KAAG,EAAH,GAAM,IAAlC;AACA,cAAMC,UAAU,GAAC,IAAIC,IAAJ,CACf,IAAIA,IAAJ,GAAWC,OAAX,KAAuBH,qBADR,CAAjB;AAGApC,QAAAA,YAAY,CAACmC,OAAb,CAAqB,YAArB,EAAkCE,UAAU,CAACG,WAAX,EAAlC;AACA,aAAK7C,aAAL,CAAmByC,qBAAnB;AACD,OA7BD,EA8BCf,IA9BD,CA8BMoB,MAAM,IAAE;AACZ,aAAKZ,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD,OAhCD,EAiCCC,KAjCD,CAiCOC,GAAG,IAAE;AACVR,QAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ;AACA,aAAKlC,QAAL,CAAc;AACZT,UAAAA,MAAM,EAAE,KADI;AAEZG,UAAAA,KAAK,EAAEwC;AAFK,SAAd;AAID,OAvCD;AAwCD,KAlKyB;;AAAA,SAmK1Bc,mBAnK0B,GAmKLJ,QAAD,IAAY,CAC/B,CApKyB;;AAAA,SAqK1BK,gBArK0B,GAqKRL,QAAD,IAAY;AAC3BpE,MAAAA,KAAK,CAAC;AACJoC,QAAAA,MAAM,EAAC,MADH;AAEJiC,QAAAA,GAAG,EAAC,0CAFA;AAGJC,QAAAA,IAAI,EAAC;AAACI,UAAAA,WAAW,EAACN,QAAQ,CAACM,WAAtB;AAAkCC,UAAAA,MAAM,EAACP,QAAQ,CAACO,MAAlD;AAAyD9B,UAAAA,IAAI,EAACuB,QAAQ,CAACvB;AAAvE;AAHD,OAAD,CAAL,CAKCC,IALD,CAKMsB,QAAQ,IAAE;AACd,YAAGA,QAAQ,CAACpB,MAAT,KAAkB,GAArB,EAAyB;AACvB,gBAAM,IAAIC,KAAJ,CAAU,mBAAV,CAAN;AACD;;AACD,YAAGmB,QAAQ,CAACpB,MAAT,KAAoB,GAApB,IAA2BoB,QAAQ,CAACpB,MAAT,KAAmB,GAAjD,EAAqD;AACnD,gBAAM,IAAIC,KAAJ,CAAU,6BAAV,CAAN;AACD;;AAED,eAAOmB,QAAP;AACD,OAdD,EAeCtB,IAfD,CAeMO,OAAO,IAAE;AACbH,QAAAA,OAAO,CAACC,GAAR,CAAYE,OAAZ;AACA,aAAK7B,QAAL,CAAc;AACZT,UAAAA,MAAM,EAAE,IADI;AAEZC,UAAAA,KAAK,EAAEqC,OAAO,CAACqB,WAFH;AAGZzD,UAAAA,MAAM,EAAEoC,OAAO,CAACsB;AAHJ,SAAd;AAKAlD,QAAAA,YAAY,CAACmC,OAAb,CAAqB,OAArB,EAA6BP,OAAO,CAACrC,KAArC;AACAS,QAAAA,YAAY,CAACmC,OAAb,CAAqB,QAArB,EAA8BP,OAAO,CAACpC,MAAtC;AACA,cAAM4C,qBAAqB,GAAC,KAAG,EAAH,GAAM,IAAlC;AACA,cAAMC,UAAU,GAAC,IAAIC,IAAJ,CACf,IAAIA,IAAJ,GAAWC,OAAX,KAAuBH,qBADR,CAAjB;AAGApC,QAAAA,YAAY,CAACmC,OAAb,CAAqB,YAArB,EAAkCE,UAAU,CAACG,WAAX,EAAlC;AACA,aAAK7C,aAAL,CAAmByC,qBAAnB;AACD,OA9BD,EA+BCf,IA/BD,CA+BMoB,MAAM,IAAE;AACZ,aAAKZ,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD,OAjCD,EAkCCC,KAlCD,CAkCOC,GAAG,IAAE;AACVR,QAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ;AACA,aAAKlC,QAAL,CAAc;AACZT,UAAAA,MAAM,EAAE,KADI;AAEZG,UAAAA,KAAK,EAAEwC;AAFK,SAAd;AAID,OAxCD;AAyCH,KA/M2B;AAAA;;AAa1BkB,EAAAA,iBAAiB,GAAG;AAElB,UAAM5D,KAAK,GAAGS,YAAY,CAACoD,OAAb,CAAqB,OAArB,CAAd;AACA,UAAMf,UAAU,GAAGrC,YAAY,CAACoD,OAAb,CAAqB,YAArB,CAAnB;;AACA,QAAI,CAAC7D,KAAD,IAAU,CAAC8C,UAAf,EAA2B;AACzB;AACD;;AACD,QAAI,IAAIC,IAAJ,CAASD,UAAT,KAAwB,IAAIC,IAAJ,EAA5B,EAAwC;AACtC,WAAKxC,aAAL;AACA;AACD;;AACD,UAAMN,MAAM,GAAGQ,YAAY,CAACoD,OAAb,CAAqB,QAArB,CAAf;AACA,UAAMhB,qBAAqB,GACzB,IAAIE,IAAJ,CAASD,UAAT,EAAqBE,OAArB,KAAiC,IAAID,IAAJ,GAAWC,OAAX,EADnC;AAEA,SAAKxC,QAAL,CAAc;AAAET,MAAAA,MAAM,EAAE,IAAV;AAAgBC,MAAAA,KAAK,EAAEA,KAAvB;AAA8BC,MAAAA,MAAM,EAAEA;AAAtC,KAAd;AACA,SAAKG,aAAL,CAAmByC,qBAAnB;AACD;;AAsLDiB,EAAAA,MAAM,GAAI;AACR,QAAIC,MAAM,gBACR,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACL,oBAAC,KAAD;AACO,MAAA,IAAI,EAAC,QADZ;AAEO,MAAA,KAAK,MAFZ;AAGO,MAAA,MAAM,EAAEzB,KAAK,iBACX,oBAAC,aAAD,oBAAmBA,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADK,eAQE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,eAAZ;AAA4B,MAAA,KAAK,MAAjC;AAAkC,MAAA,MAAM,EAAEA,KAAK,iBAAG,oBAAC,cAAD,oBAAoBA,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARF,eASA,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,KAAK,MAFP;AAGE,MAAA,MAAM,EAAEA,KAAK,iBACX,oBAAC,KAAD,oBACMA,KADN;AAEE,QAAA,OAAO,EAAE,KAAKK,YAFhB;AAGE,QAAA,qBAAqB,EAAE,KAAKQ,qBAH9B;AAIE,QAAA,mBAAmB,EAAE,KAAKK,mBAJ5B;AAKE,QAAA,gBAAgB,EAAE,KAAKC,gBALzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATA,eAuBA,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,SADP;AAEE,MAAA,KAAK,MAFP;AAGE,MAAA,MAAM,EAAEnB,KAAK,iBACX,oBAAC,MAAD,oBACMA,KADN;AACa,QAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWG,MADhC;AACwC,QAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,KAD1D;AACiE,QAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,MADpF;AAEE,QAAA,QAAQ,EAAE,KAAKe,aAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAvBA,eAkCA,oBAAC,KAAD;AACA,MAAA,IAAI,EAAC,OADL;AAEA,MAAA,KAAK,MAFL;AAGA,MAAA,MAAM,EAAEwB,KAAK,iBACX,oBAAC,IAAD,oBAAUA,KAAV;AAAiB,QAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWG,MAApC;AAA4C,QAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,KAA9D;AAAqE,QAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,MAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlCA,eAyCA,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,KAAK,MAAzB;AACC,MAAA,MAAM,EAAEuC,KAAK,iBAAG,oBAAC,IAAD,oBAAUA,KAAV;AAAiB,QAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWG,MAApC;AAA4C,QAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,KAA9D;AAAqE,QAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,MAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzCA,eA2CE,oBAAC,KAAD;AACI,MAAA,IAAI,EAAC,GADT;AAEI,MAAA,KAAK,MAFT;AAGI,MAAA,MAAM,EAAEuC,KAAK,iBACX,oBAAC,KAAD;AAAO,QAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWG,MAA1B;AAAkC,QAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,KAApD;AAA2D,QAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,MAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3CF,eAmDE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,aAAZ;AAA0B,MAAA,KAAK,MAA/B;AACC,MAAA,MAAM,EAAEuC,KAAK,iBAAG,oBAAE,aAAF,oBAAoBA,KAApB;AAA4B,QAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWG,MAA/C;AAAuD,QAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,KAAzE;AAAgF,QAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,MAAnG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAnDF,eAsDA,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtDA,CADF;;AA0DA,QAAG,KAAKD,KAAL,CAAWC,MAAd,EAAqB;AACnBgE,MAAAA,MAAM,gBACJ,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC,SAAZ;AAAsB,QAAA,KAAK,MAA3B;AACA,QAAA,MAAM,EAAEzB,KAAK,iBAAG,oBAAC,MAAD,oBAAYA,KAAZ;AAAmB,UAAA,QAAQ,EAAE,KAAK/B,aAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,eAGD,oBAAC,KAAD;AACD,QAAA,IAAI,EAAC,OADJ;AAED,QAAA,KAAK,MAFJ;AAGD,QAAA,MAAM,EAAE+B,KAAK,iBACX,oBAAC,IAAD,oBAAUA,KAAV;AAAiB,UAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWG,MAApC;AAA4C,UAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,KAA9D;AAAqE,UAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,MAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAJD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHC,eAUF,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC,OAAZ;AAAoB,QAAA,KAAK,MAAzB;AAA2B,QAAA,MAAM,EAAEuC,KAAK,iBAAG,oBAAC,IAAD,oBAAUA,KAAV;AAAiB,UAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWG,MAApC;AAA4C,UAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,KAA9D;AAAqE,UAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,MAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAVE,eAWH,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC,WAAZ;AAAwB,QAAA,KAAK,MAA7B;AAA8B,QAAA,MAAM,EAAEuC,KAAK,iBAAG,oBAAC,QAAD,oBAAcA,KAAd;AAAqB,UAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWG,MAAxC;AAAgD,UAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,KAAlE;AAAyE,UAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,MAA5F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAXG,eAYH,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC,UAAZ;AACC,QAAA,KAAK,MADN;AACO,QAAA,MAAM,EAAEuC,KAAK,iBAAG,oBAAC,OAAD,oBAAaA,KAAb;AAAoB,UAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWG,MAAvC;AAA+C,UAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,KAAjE;AAAwE,UAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,MAA3F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZG,eAcJ,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC,gBAAZ;AAA6B,QAAA,KAAK,MAAlC;AAAmC,QAAA,MAAM,EAAEuC,KAAK,iBAAG,oBAAC,aAAD,oBAAmBA,KAAnB;AAA0B,UAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWG,MAA7C;AAAqD,UAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,KAAvE;AAA8E,UAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,MAAjG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAdI,eAeH,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC,aAAZ;AAA0B,QAAA,KAAK,MAA/B;AAAgC,QAAA,MAAM,EAAEuC,KAAK,iBAAG,oBAAE,aAAF,oBAAoBA,KAApB;AAA2B,UAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWG,MAA9C;AAAsD,UAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,KAAxE;AAA+E,UAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,MAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAfG,eAiBA,oBAAC,KAAD;AACI,QAAA,IAAI,EAAC,GADT;AAEI,QAAA,KAAK,MAFT;AAGI,QAAA,MAAM,EAAEuC,KAAK,iBACX,oBAAC,KAAD;AAAO,UAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWG,MAA1B;AAAkC,UAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,KAApD;AAA2D,UAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,MAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAjBA,eAyBF,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAzBE,CADF;AA6BD;;AAED,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACEgE,MADF,CADF;AAMD;;AApTyB;;AAuT5B,eAAehF,UAAU,CAACc,GAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\nimport { Route,Switch,Redirect,withRouter} from 'react-router-dom'\nimport axios from 'axios'\n\nimport Login from './Containers/Auth/Login/Login'\nimport Signup from './Containers/Auth/Signup/Signup';\nimport Logout from './Containers/Auth/Logout/Logout'\nimport ResetPassword from './Containers/Auth/ForgetPassword/ResetPassword/ResetPassword'\nimport SetNewPassword from './Containers/Auth/ForgetPassword/NewPassword/NewPassword'\nimport Index from './Containers/Index/Index'\nimport Shop from './Containers/Shop/Index'\nimport DetailProduct from './Containers/DetailProduct/Index';\n\nimport Cart from './Containers/Checkout/ShoppingCart/Index'\nimport Shipping from './Containers/Checkout/Shipping/Index'\nimport Payment from './Containers/Checkout/Payment/Index'\nimport CompleteOrder from './Containers/Checkout/Index'\nclass App extends Component {\n  state = {\n    isAuth: false,\n    token: null,\n    userId: null,\n    error: null,\n    fetchedProducts:[]\n  };\n  setAutoLogout = milliseconds => {\n    setTimeout(() => {\n      this.logoutHandler();\n    }, milliseconds);\n  };\n  componentDidMount() {\n  \n    const token = localStorage.getItem('token');\n    const expiryDate = localStorage.getItem('expiryDate');\n    if (!token || !expiryDate) {\n      return;\n    }\n    if (new Date(expiryDate) <= new Date()) {\n      this.logoutHandler();\n      return;\n    }\n    const userId = localStorage.getItem('userId');\n    const remainingMilliseconds =\n      new Date(expiryDate).getTime() - new Date().getTime();\n    this.setState({ isAuth: true, token: token, userId: userId });\n    this.setAutoLogout(remainingMilliseconds);\n  }\n  \n  logoutHandler = () => {\n    this.setState({ isAuth: false, token: null });\n    localStorage.removeItem('token');\n    localStorage.removeItem('expiryDate');\n    localStorage.removeItem('userId');\n    localStorage.removeItem('name');\n    window.location.reload(false)\n  };\n  \n  signupHandler = (event, authData) => {\n    event.preventDefault();\n    this.setState({ authLoading: true });\n    fetch('http://localhost:8080/auth/signup', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: authData.signupForm.email.value,\n        password: authData.signupForm.password.value,\n        name: authData.signupForm.name.value\n      })\n    })\n      .then(res => {\n        if (res.status === 422) {\n          throw new Error(\n            \"Validation failed. Make sure the email address isn't used yet!\"\n          );\n        }\n        if (res.status !== 200 && res.status !== 201) {\n          console.log('Error!');\n          throw new Error('Creating a user failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.props.history.push('/login');\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n  loginHandler=(event,authData)=>{\n    event.preventDefault();\n    fetch('http://localhost:8080/auth/login',{\n      method:'POST',\n      headers:{\n        'Content-Type':'application/json'\n      },\n      body:JSON.stringify({\n        email:authData.email,\n        password:authData.password\n      })\n    })\n    .then(res=>{\n      if(res.status===422){\n        throw new Error('Validation failed')\n      }\n      if(res.status !== 200 && res.status !==201){\n        throw new Error('Could not authenticate you!')\n      }\n      return res.json()\n    })\n    .then(resData=>{\n      this.setState({\n        isAuth: true,\n        token: resData.token,\n        userId: resData.userId\n      });\n      localStorage.setItem('token',resData.token);\n      localStorage.setItem('userId',resData.userId)\n      const remainingMilliseconds=60*60*1000;\n      const expiryDate=new Date(\n        new Date().getTime() + remainingMilliseconds\n      )\n      localStorage.setItem('expiryDate',expiryDate.toISOString())\n      this.setAutoLogout(remainingMilliseconds);\n    })\n    .then(result=>{\n      this.props.history.push('/');\n    })\n    .catch(err=>{\n      console.log(err)\n      this.setState({\n        isAuth: false,\n        error: err\n      });\n    })\n  }\n \n  responseSuccessGoogle=(response)=>{\n    axios({ \n      method:\"POST\",\n      url:'http://localhost:8080/auth/googleLogin',\n      data:{tokenId:response.tokenId}\n    })\n    .then(res=>{\n      if(res.status===422){\n        throw new Error('Validation failed')\n      }\n      if(res.status !== 200 && res.status !==201){\n        throw new Error('Could not authenticate you!')\n      }\n      \n      return res.data\n    })\n    .then(resData=>{\n      this.setState({\n        isAuth: true,\n        token: resData.token,\n        userId: resData.userId\n      });\n      localStorage.setItem('token',resData.token);\n      localStorage.setItem('userId',resData.userId);\n      const remainingMilliseconds=60*60*1000;\n      const expiryDate=new Date(\n        new Date().getTime() + remainingMilliseconds\n      )\n      localStorage.setItem('expiryDate',expiryDate.toISOString())\n      this.setAutoLogout(remainingMilliseconds);\n    })\n    .then(result=>{\n      this.props.history.push('/');\n    })\n    .catch(err=>{\n      console.log(err)\n      this.setState({\n        isAuth: false,\n        error: err\n      });\n    })\n  }\n  responseErrorGoogle=(response)=>{\n  }\n  responseFacebook=(response)=>{\n    axios({\n      method:\"POST\",\n      url:'http://localhost:8080/auth/facebookLogin',\n      data:{accessToken:response.accessToken,userID:response.userID,name:response.name}\n    })\n    .then(response=>{\n      if(response.status===422){\n        throw new Error('Validation failed')\n      }\n      if(response.status !== 200 && response.status !==201){\n        throw new Error('Could not authenticate you!')\n      }\n    \n      return response\n    })\n    .then(resData=>{\n      console.log(resData)\n      this.setState({\n        isAuth: true,\n        token: resData.accessToken,\n        userId: resData.userID\n      });\n      localStorage.setItem('token',resData.token);\n      localStorage.setItem('userId',resData.userId)\n      const remainingMilliseconds=60*60*1000;\n      const expiryDate=new Date(\n        new Date().getTime() + remainingMilliseconds\n      )\n      localStorage.setItem('expiryDate',expiryDate.toISOString())\n      this.setAutoLogout(remainingMilliseconds);\n    })\n    .then(result=>{\n      this.props.history.push('/');\n    })\n    .catch(err=>{\n      console.log(err)\n      this.setState({\n        isAuth: false,\n        error: err\n      });\n    })\n}\n\n\n\n  render () {\n    let routes=(\n      <Switch>\n <Route \n        path=\"/reset\"\n        exact\n        render={props=>(\n          <ResetPassword {...props}></ResetPassword>\n        )}\n        />\n        <Route path=\"/reset/:token\" exact render={props=>(<SetNewPassword {...props} />)}></Route>\n      <Route\n        path=\"/login\"\n        exact\n        render={props => (\n          <Login\n            {...props}\n            onLogin={this.loginHandler} \n            responseSuccessGoogle={this.responseSuccessGoogle}\n            responseErrorGoogle={this.responseErrorGoogle}\n            responseFacebook={this.responseFacebook}\n         \n          />\n        )}\n      />\n      <Route\n        path=\"/signup\"\n        exact\n        render={props => (\n          <Signup\n            {...props} userId={this.state.userId} token={this.state.token} isAuth={this.state.isAuth}\n            onSignup={this.signupHandler}          \n          />\n        )}\n      />\n     \n      <Route\n      path=\"/shop\"\n      exact \n      render={props=>(\n        <Shop {...props} userId={this.state.userId} token={this.state.token} isAuth={this.state.isAuth}></Shop>\n      )}\n      ></Route>\n      <Route path=\"/cart\" exact\n       render={props=>(<Cart {...props} userId={this.state.userId} token={this.state.token} isAuth={this.state.isAuth}></Cart>)}></Route>\n        <Route\n            path=\"/\"\n            exact\n            render={props => (\n              <Index userId={this.state.userId} token={this.state.token} isAuth={this.state.isAuth} />\n            )}\n          />\n          \n        <Route path=\"/:productId\" exact\n         render={props=>(< DetailProduct {...props}  userId={this.state.userId} token={this.state.token} isAuth={this.state.isAuth}\n          ></ DetailProduct>)} />\n      <Redirect to=\"/\" />\n    </Switch>\n    )\n    if(this.state.isAuth){\n      routes=(\n        <Switch>\n            <Route path=\"/logout\" exact \n            render={props=>(<Logout {...props} onLogout={this.logoutHandler}></Logout>)} ></Route>\n       <Route\n      path=\"/shop\"\n      exact \n      render={props=>(\n        <Shop {...props} userId={this.state.userId} token={this.state.token} isAuth={this.state.isAuth}></Shop>\n      )}\n      ></Route>\n      <Route path=\"/cart\" exact  render={props=>(<Cart {...props} userId={this.state.userId} token={this.state.token} isAuth={this.state.isAuth}></Cart>)}></Route>\n     <Route path=\"/shipping\" exact render={props=>(<Shipping {...props} userId={this.state.userId} token={this.state.token} isAuth={this.state.isAuth} />)}></Route>\n     <Route path=\"/payment\" \n      exact render={props=>(<Payment {...props} userId={this.state.userId} token={this.state.token} isAuth={this.state.isAuth} />)}></Route>\n    <Route path=\"/completeOrder\" exact render={props=>(<CompleteOrder {...props} userId={this.state.userId} token={this.state.token} isAuth={this.state.isAuth}></CompleteOrder>)} ></Route>\n     <Route path=\"/:productId\" exact render={props=>(< DetailProduct {...props} userId={this.state.userId} token={this.state.token} isAuth={this.state.isAuth}></ DetailProduct>)} />\n\n        <Route\n            path=\"/\"\n            exact\n            render={props => (\n              <Index userId={this.state.userId} token={this.state.token} isAuth={this.state.isAuth} />\n            )}\n          />\n          \n      <Redirect to=\"/\" />\n        </Switch>\n      )\n    }\n\n    return (\n      <div>\n       {routes}\n      </div>\n   \n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}