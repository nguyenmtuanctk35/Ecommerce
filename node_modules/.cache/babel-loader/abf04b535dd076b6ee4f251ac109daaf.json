{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\REACT\\\\TestHook\\\\testhook\\\\front-end\\\\src\\\\Components\\\\ShopComponents\\\\ListProducts\\\\ListProducts.js\";\nimport React, { useState, useEffect } from 'react';\nimport Block from '../../BlockInfor/BlockInfor';\nimport Paginator from './Paginator';\nimport Pagination from '@material-ui/lab/Pagination';\nimport './ListProducts.css';\nimport { useHistory } from 'react-router-dom';\n\nconst imgSrc = require('../../../Assets/banner.png');\n\nconst ListProducts = props => {\n  const initialPage = parseInt(localStorage.getItem('page'), 10);\n  const [page, setPage] = useState(initialPage || 1);\n  const [posts, setPosts] = useState([]);\n  const [totalPosts, setTotalPosts] = useState(0);\n  useEffect(() => {\n    loadPosts();\n    history.push('/shop?=' + page);\n  }, [page]);\n  let history = useHistory();\n\n  const loadPosts = async () => {\n    await fetch('http://localhost:8080/products/productsShop?page=' + page).then(res => {\n      if (res.status !== 200) {\n        throw new Error('Failed to fetch!');\n      }\n\n      return res.json();\n    }).then(resData => {\n      let fetchedProducts = [];\n\n      for (let key in resData.products) {\n        fetchedProducts.push({ ...resData.products[key],\n          id: resData.products[key]._id\n        });\n      }\n\n      const totalPages = Math.ceil(resData.totalPages);\n      setPosts(fetchedProducts);\n      setTotalPosts(totalPages);\n    }).catch(this.catchError);\n  };\n\n  const handleChange = async (event, value) => {\n    setPage(value);\n    await localStorage.setItem('page', value);\n    window.scrollTo(0, 0);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8 col-lg-10\",\n    style: {\n      display: 'inline-block',\n      marginTop: '1rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: imgSrc,\n    alt: \"\",\n    style: {\n      width: '100%',\n      height: 'auto',\n      display: 'block'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Paginator, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 8\n    }\n  }, posts.map(el => /*#__PURE__*/React.createElement(Block, {\n    key: el.id,\n    imgSrc: el.thumbnail_url,\n    link: el.id,\n    title: el.name,\n    price: el.list_price,\n    discountPrice: el.price,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(Pagination, {\n    color: \"primary\",\n    count: totalPosts,\n    page: page,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 8\n    }\n  }));\n};\n\nexport default ListProducts;","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/REACT/TestHook/testhook/front-end/src/Components/ShopComponents/ListProducts/ListProducts.js"],"names":["React","useState","useEffect","Block","Paginator","Pagination","useHistory","imgSrc","require","ListProducts","props","initialPage","parseInt","localStorage","getItem","page","setPage","posts","setPosts","totalPosts","setTotalPosts","loadPosts","history","push","fetch","then","res","status","Error","json","resData","fetchedProducts","key","products","id","_id","totalPages","Math","ceil","catch","catchError","handleChange","event","value","setItem","window","scrollTo","display","marginTop","width","height","map","el","thumbnail_url","name","list_price","price"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react';\r\nimport Block from '../../BlockInfor/BlockInfor'\r\nimport Paginator from './Paginator'\r\nimport Pagination from '@material-ui/lab/Pagination';\r\nimport './ListProducts.css'\r\nimport {useHistory} from 'react-router-dom'\r\nconst imgSrc=require('../../../Assets/banner.png')\r\n\r\nconst ListProducts =props=> {\r\n \r\n    const initialPage=parseInt(localStorage.getItem('page'),10)\r\n    const [page,setPage]=useState((initialPage)||1);\r\n    const [posts,setPosts]=useState([]);\r\n    const [totalPosts,setTotalPosts]=useState(0)\r\n    useEffect(()=>{\r\n         loadPosts();\r\n         history.push('/shop?='+page)\r\n    },[page])\r\n\r\n    let history=useHistory();\r\n   const loadPosts =async () => {\r\n      await fetch('http://localhost:8080/products/productsShop?page=' + page)\r\n          .then(res=>{\r\n              if(res.status !==200){\r\n                  throw new Error('Failed to fetch!')\r\n              }\r\n              return res.json()\r\n          \r\n        })\r\n        .then(resData=>{\r\n                let fetchedProducts=[];\r\n               \r\n            for(let key in resData.products){\r\n                fetchedProducts.push({\r\n                    ...resData.products[key],\r\n                    id:resData.products[key]._id,\r\n                })\r\n            } \r\n            const totalPages=Math.ceil(resData.totalPages)\r\n            setPosts(fetchedProducts)\r\n            setTotalPosts(totalPages)\r\n        })\r\n          .catch(this.catchError);\r\n      };\r\n  \r\n      const handleChange=async(event,value)=>{\r\n          setPage(value);\r\n      await localStorage.setItem('page',value);\r\n        \r\n     window.scrollTo(0,0)\r\n      }\r\n    return (\r\n      \r\n        <div className=\"col-md-8 col-lg-10\" style={{display:'inline-block',marginTop:'1rem'}}>\r\n            <img src={imgSrc} alt=\"\" style={{width:'100%',height:'auto',display:'block'}}></img>\r\n       <Paginator \r\n       >\r\n             {posts.map(el=>(\r\n                      <Block key={el.id} imgSrc={el.thumbnail_url} link={el.id}\r\n               title={el.name}\r\n               price={el.list_price}\r\n               discountPrice={el.price} \r\n               ></Block>              \r\n           ))}\r\n       </Paginator>\r\n       <Pagination  color=\"primary\"  count={totalPosts} page={page} onChange={handleChange} />\r\n\r\n         </div>\r\n   \r\n    );\r\n}\r\n\r\nexport default ListProducts"]},"metadata":{},"sourceType":"module"}